<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Company Profile - Program Donasi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 60px 0;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .campaign-section {
            padding: 80px 0;
        }

        .section-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 50px;
            color: #2c3e50;
        }

        .campaign-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .campaign-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
        }

        .campaign-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .campaign-image {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-bottom: 3px solid #667eea;
        }

        .campaign-content {
            padding: 25px;
        }

        .campaign-category {
            display: inline-block;
            background: #e3f2fd;
            color: #1976d2;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .campaign-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: #2c3e50;
            line-height: 1.4;
        }

        .campaign-description {
            color: #6c757d;
            font-size: 0.95rem;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .campaign-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px 0;
            border-top: 1px solid #e9ecef;
        }

        .campaign-target {
            font-size: 1.1rem;
            font-weight: 700;
            color: #28a745;
        }

        .campaign-location {
            font-size: 0.9rem;
            color: #6c757d;
            display: flex;
            align-items: center;
        }

        .donate-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            width: 100%;
            text-align: center;
        }

        .donate-btn:hover {
            background: linear-gradient(135deg, #218838, #1e7e34);
            transform: scale(1.02);
            color: white;
            text-decoration: none;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.1rem;
            color: #6c757d;
        }

        .error {
            text-align: center;
            padding: 50px;
            color: #dc3545;
            font-size: 1.1rem;
        }

        .no-campaigns {
            text-align: center;
            padding: 50px;
            color: #6c757d;
            font-size: 1.1rem;
        }

        .cta-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 60px 0;
            margin-top: 50px;
        }

        .cta-section h2 {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .cta-section p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 30px;
        }

        .cta-btn {
            background: white;
            color: #667eea;
            padding: 15px 40px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1.1rem;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            color: #667eea;
            text-decoration: none;
        }

        @media (max-width: 768px) {
            .campaign-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }

            .campaign-meta {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <h1>PT. Example Company</h1>
            <p>Bergabunglah dengan kami dalam berbagi kebaikan melalui program donasi pilihan</p>
        </div>
    </header>

    <section class="campaign-section">
        <div class="container">
            <h2 class="section-title">Program Donasi Pilihan Kami</h2>
            
            <div id="loadingMessage" class="loading">
                <p>Memuat program donasi...</p>
            </div>
            
            <div id="errorMessage" class="error" style="display: none;">
                <p>Gagal memuat program donasi. Silakan coba lagi nanti.</p>
            </div>
            
            <div id="noCampaigns" class="no-campaigns" style="display: none;">
                <p>Belum ada program donasi yang tersedia saat ini.</p>
            </div>
            
            <div id="campaignContainer" class="campaign-grid" style="display: none;">
                <!-- Campaign cards will be loaded here via API -->
            </div>
        </div>
    </section>

    <section class="cta-section">
        <div class="container">
            <h2>Ingin Berdonasi Lebih Banyak?</h2>
            <p>Kunjungi website donasi kami untuk melihat semua program yang tersedia</p>
            <a href="#" id="visitDonasiSite" class="cta-btn">Kunjungi Website Donasi</a>
        </div>
    </section>

    <script>
        // KONFIGURASI API - Ganti dengan URL website donasi Laravel Anda
        const DONASI_API_CONFIG = {
            baseUrl: 'http://localhost:8000', // URL website donasi Laravel
            campaignLimit: 6, // Jumlah campaign yang ditampilkan
            apiTimeout: 10000 // Timeout 10 detik
        };

        // Elements
        const loadingMessage = document.getElementById('loadingMessage');
        const errorMessage = document.getElementById('errorMessage');
        const noCampaigns = document.getElementById('noCampaigns');
        const campaignContainer = document.getElementById('campaignContainer');
        const visitDonasiSite = document.getElementById('visitDonasiSite');

        // Set visit website link
        visitDonasiSite.href = DONASI_API_CONFIG.baseUrl;

        // Function to load campaigns from Laravel API
        async function loadCampaignsFromAPI() {
            try {
                showLoading();

                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), DONASI_API_CONFIG.apiTimeout);

                const apiUrl = `${DONASI_API_CONFIG.baseUrl}/api/campaigns?limit=${DONASI_API_CONFIG.campaignLimit}&base_url=${DONASI_API_CONFIG.baseUrl}`;
                
                console.log('Fetching campaigns from:', apiUrl);

                const response = await fetch(apiUrl, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                    },
                    signal: controller.signal
                });

                clearTimeout(timeoutId);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                console.log('API Response:', data);
                
                if (data.success && data.data && data.data.campaigns && data.data.campaigns.length > 0) {
                    displayCampaigns(data.data.campaigns);
                } else {
                    showNoCampaigns();
                }
            } catch (error) {
                console.error('Error loading campaigns:', error);
                
                if (error.name === 'AbortError') {
                    console.error('Request timeout');
                }
                
                showError();
            }
        }

        // Function to show loading state
        function showLoading() {
            loadingMessage.style.display = 'block';
            errorMessage.style.display = 'none';
            noCampaigns.style.display = 'none';
            campaignContainer.style.display = 'none';
        }

        // Function to show error message
        function showError() {
            loadingMessage.style.display = 'none';
            errorMessage.style.display = 'block';
            noCampaigns.style.display = 'none';
            campaignContainer.style.display = 'none';
        }

        // Function to show no campaigns message
        function showNoCampaigns() {
            loadingMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            noCampaigns.style.display = 'block';
            campaignContainer.style.display = 'none';
        }

        // Function to display campaigns
        function displayCampaigns(campaigns) {
            campaignContainer.innerHTML = '';
            
            campaigns.forEach(campaign => {
                const campaignCard = createCampaignCard(campaign);
                campaignContainer.appendChild(campaignCard);
            });
            
            // Show campaigns and hide other messages
            loadingMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            noCampaigns.style.display = 'none';
            campaignContainer.style.display = 'grid';
        }

        // Function to create campaign card element
        function createCampaignCard(campaign) {
            const card = document.createElement('div');
            card.className = 'campaign-card';
            
            // Handle image URL
            const imageUrl = campaign.image || `https://via.placeholder.com/400x220/667eea/ffffff?text=${encodeURIComponent(campaign.title)}`;
            
            // Truncate description if too long
            const maxDescLength = 120;
            const description = campaign.short_description || campaign.description || '';
            const truncatedDesc = description.length > maxDescLength 
                ? description.substring(0, maxDescLength) + '...' 
                : description;
            
            card.innerHTML = `
                <img src="${imageUrl}" 
                     alt="${campaign.title}" 
                     class="campaign-image"
                     onerror="this.src='https://via.placeholder.com/400x220/667eea/ffffff?text=${encodeURIComponent(campaign.title)}'">
                <div class="campaign-content">
                    <div class="campaign-category">${campaign.category || 'Donasi'}</div>
                    <h3 class="campaign-title">${campaign.title}</h3>
                    <p class="campaign-description">${truncatedDesc}</p>
                    <div class="campaign-meta">
                        <div class="campaign-target">${campaign.target_formatted || 'Target tidak tersedia'}</div>
                        <div class="campaign-location">üìç ${campaign.location || 'Lokasi tidak tersedia'}</div>
                    </div>
                    <a href="${campaign.donation_url}" 
                       target="_blank" 
                       rel="noopener noreferrer"
                       class="donate-btn"
                       onclick="trackDonationClick('${campaign.title}', ${campaign.id})">
                        üíù Donasi Sekarang
                    </a>
                </div>
            `;
            
            return card;
        }

        // Function to track donation clicks (optional - for analytics)
        function trackDonationClick(campaignTitle, campaignId) {
            console.log(`User clicked donation for: ${campaignTitle} (ID: ${campaignId})`);
            
            // You can add Google Analytics or other tracking here
            // Example: gtag('event', 'click', { 
            //     'event_category': 'donation', 
            //     'event_label': campaignTitle,
            //     'value': campaignId
            // });

            // You can also send to your own analytics endpoint
            // fetch('/api/track-click', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify({ 
            //         campaign_id: campaignId, 
            //         campaign_title: campaignTitle,
            //         source: 'company_profile'
            //     })
            // });
        }

        // Function to retry loading campaigns
        function retryCampaigns() {
            console.log('Retrying to load campaigns...');
            loadCampaignsFromAPI();
        }

        // Add retry button to error message
        document.addEventListener('DOMContentLoaded', function() {
            const errorDiv = document.getElementById('errorMessage');
            const retryButton = document.createElement('button');
            retryButton.textContent = 'Coba Lagi';
            retryButton.style.marginTop = '15px';
            retryButton.style.padding = '10px 20px';
            retryButton.style.backgroundColor = '#007bff';
            retryButton.style.color = 'white';
            retryButton.style.border = 'none';
            retryButton.style.borderRadius = '5px';
            retryButton.style.cursor = 'pointer';
            retryButton.onclick = retryCampaigns;
            
            errorDiv.appendChild(retryButton);
        });

        // Load campaigns when page is ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded, fetching campaigns...');
            loadCampaignsFromAPI();
        });

        // Optional: Auto-refresh campaigns every 5 minutes
        // setInterval(loadCampaignsFromAPI, 5 * 60 * 1000);
    </script>
</body>
</html>

  <!-- ======= Hero Section ======= -->
  <section id="hero" class="d-flex flex-column justify-content-center align-items-center">
    <div class="container text-center text-md-left" data-aos="fade-up">
      <h1>BaitulMaalKu</h1>
      <h2>Aku untuk umat</h2>
      <a href="#campaign" class="btn-get-started scrollto">Yuk Donasi !</a>
    </div>
  </section><!-- End Hero -->

  <main id="main">

    <!-- ======= What We Do Section ======= -->
    <section id="what-we-do" class="what-we-do">
      <div class="container",>
          <div class="row">
            <div class="col-lg-3 col-md-6 d-flex align-items-stretch kalkulator">
              <div class="icon-box">
                  <div class="icon"><i class="bx bx-calculator"></i></div>
                  <h4><a href="#" data-bs-toggle="modal" data-bs-target="#zakatModal">Kalkulator Zakat</a></h4>
                  <p>
                    Hitung zakat dengan mudah!   
                  </p>
              </div>
          </div>
          
  
              <div class="col-lg-3 col-md-6 d-flex align-items-stretch">
                  <div class="icon-box" style="width: 100%;">
                      <div class="icon"><i class="bx bx-credit-card-front"></i></div>
                      <h4><a href="#" data-bs-toggle="modal" data-bs-target="#rekeningModal">Rekening Kami</a></h4>
                      <p>Dapatkan detail rekening dan informasi pembayaran zakat dan infaq.</p>
                  </div>
              </div>
  
              <div class="col-lg-3 col-md-6 d-flex align-items-stretch">
                <div class="icon-box" style="width: 100%;">
                      <div class="icon"><i class="bx bx-file"></i></div>
                      <h4><a href="/tataKelola">Tata Kelola Lembaga</a></h4>
                      <p>Pelajari prinsip dan prosedur tata kelola yang kami terapkan.</p>
                  </div>
              </div>
  
              <div class="col-lg-3  col-md-6 d-flex align-items-stretch">
                <div class="icon-box" style="width: 100%;">
                    <div class="icon"><i class="bx bx-briefcase-alt"></i></div>
                      <h4><a href="/mitra-kami">Mitra Kami</a></h4>
                      <p>Temukan informasi mengenai mitra-mitra yang bekerja sama dengan kami.</p>
                  </div>
              </div>
          </div>
      </div>
  </section><!-- End What We Do Section -->

<!--======= Campaign Section ======= -->
<section id="campaign" class="campaign section-bg">
  <div class="container">
    <div class="section-title">
      <h2>Yuk sedekah!</h2>
      <p>Mari berbagi kebahagiaan dengan mendukung program-program di bawah ini</p>
    </div>
    
    <div class="campaigns row">
      <% if (campaigns.length === 0) { %>
        <p class="no-campaigns-message">Campaign saat ini belum tersedia</p>
      <% } else { %>
        <% campaigns.forEach(function(campaign) { %>
          <div class="col-md-6 col-lg-4">
            <div class="card campaign">
              <img src="<%= campaign.imgSrc %>" class="card-img-top" alt="<%= campaign.title %>">
              <div class="card-body">
                <h5 class="card-title"><%= campaign.title %></h5>
                <div class="progress">
                  <div class="progress-bar" role="progressbar" style="width: <%= campaign.progressPercentage %>%;" aria-valuenow="<%= campaign.progressPercentage %>" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <p class="amount-collected">
                  Terkumpul<br><span class="amount-blue"><%= campaign.amountCollected %></span> dari <span class="amount-blue"><%= campaign.goalAmount %></span>
                </p>
                <button href="/campaigns/<%= campaign.id %>/donate" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#donasiModal" data-campaign="<%= campaign.title %>">Donasi</button>
              </div>
            </div>
          </div>
        <% }); %>
      <% } %>
    </div>
  </div>
</section>



  <section id="services" class="services section-bg">
    <div class="container">

      <div class="section-title">
        <h2>Program Kami</h2>
        <p>Berikut ini adalah beberapa program kami</p>
      </div>

      <div class="row">
              <!-- Program Pintara -->
      <div class="col-md-6">
        <div class="icon-box">
          <div class="icon-img" style="position: absolute;">
            <img src="assets\img\program/pintara.png" alt="Pintara Icon" width="130" height="130">
          </div>
          <div class="icon-content">
            <h4><a href="#">Pintara <br> (Program Inisiasi Bina Petani Sejahtera)</a></h4>
            <p>Program pemberdayaan petani lokal dalam mengelola budidaya kentang dan sawah secara inovatif dan terpadu</p>
          </div>
        </div>
      </div>

        <div class="col-md-6 mt-4 mt-lg-0">
          <div class="icon-box">
            <div class="icon-img" style="position: absolute;">
              <img src="assets\img\program\akademi.png" alt="Akademi Berdaya Icon" width="130" height="130">
            </div>
            <h4><a href="#">Akademi Berdaya</a></h4>
            <p>Program pemberdayaan ekonomi dengan pembinaan skill menjahit bagi masyarakat usia produktif</p>
          </div>
        </div>
        <div class="col-md-6 mt-4">
          <div class="icon-box">
            <div class="icon-img" style="position: absolute;">
              <img src="assets\img\program\ramadhan.png" alt="Wakaf Icon" width="130" height="130">
            </div>
            <h4><a href="#">RamadhanKu</a></h4>
            <p>Program di bulan suci Ramadhan bertujuan untuk menjadikan Ramadhan produktif dan kolaboratif bersama BaitulMaalKu.</p>
          </div>
        </div>
        <div class="col-md-6 mt-4">
          <div class="icon-box">
            <div class="icon-img" style="position: absolute;">
              <img src="assets\img\program\abah.png" alt="Abah Emak Icon" width="130" height="130">
            </div>
            <h4><a href="#">Muliakan Abah Emak</a></h4>
            <p>Program yang di berikan kepada Abah Emak usia lanjut setiap bulan guna memenuhi kebutuhan asasi.</p>
          </div>
        </div>
        <div class="col-md-6 mt-4">
          <div class="icon-box">
            <div class="icon-img" style="position: absolute;">
              <img src="assets\img\program\qurban.png" alt="QurbanKu Icon" width="130" height="130">
            </div>
            <h4><a href="#">QurbanKu</a></h4>
            <p>BaitulMaalKu, menghadirkan project QurbanKu sebagai fasilitas para Mudhohi untuk melaksanakan ibadah qurban, agar masyarakat pesisir dan pelosok dapat merasakan momen keberkahan 'Idul Adha.</p>
          </div>
        </div>
        <div class="col-md-6 mt-4">
          <div class="icon-box">
            <div class="icon-img" style="position: absolute;">
              <img src="assets/img/program/quran.png" alt="Al Qur'an Icon" width="130" height="130">
            </div>
            <h4><a href="#">Tebar dan Pembinaan Qur'an dan Iqro di pelosok nusantara</a></h4>
            <p>Project ini sebagai gerakan pengentasan buta huruf hijaiyah di pelosok dan pesisir nusantara.</p>
          </div>
        </div>
        <div class="col-md-6 mt-4">
          <div class="icon-box">
            <div class="icon-img" style="position: absolute;">
              <img src="assets\img\program\yatim.png" alt="Yatim Icon" width="130" height="130">
            </div>
            <h4><a href="#">Bahagiakan Yatim</a></h4>
            <p>Program yang di berikan kepada Yatim setiap bulan guna memenuhi kebutuhan asasi.</p>
          </div>
        </div>
        <div class="col-md-6 mt-4">
          <div class="icon-box">
            <div class="icon-img" style="position: absolute;">
              <img src="assets\img\program\sehat.png" alt="sehat Icon" width="130" height="130">
            </div>
            <h4><a href="#">MO-SIGAPKU</a></h4>
            <p>MO-SIGAPKU digunakan untuk memenuhi kebutuhan pendistribusian program charity dan kesehatan diwilayah pelosok dan pesisir yang sulit dijangkau.</p>
          </div>
        </div>
      </div>

    </div>
  </section><!-- End Services Section -->
  
    <!-- ======= About Section ======= -->
    <section id="about" class="about">
      <div class="container">

        <div class="row">
          <div class="col-lg-6">
            <img src="assets/img/about.jpg" class="img-fluid" alt="">
          </div>
          <div class="col-lg-6 pt-4 pt-lg-0">
            <h3>Tentang Kami</h3>
            <p>
              
            </p>
            <ul class="about-li">
              <li><i class="bx bx-check-double"></i> BaitulMaalKu didirikan atas semangat dakwah di bidang keuangan sosial islam terutama pada isu zakat, infaq dan wakaf. Bermula dari penyelenggaraan kegiatan bertema islam sejak tahun 2017, akhirnya mengukuhkan legalitas sebagai yayasan dan LAZ yang telah terbit pada tahun 2019.</li>
              <li><i class="bx bx-check-double"></i> BaitulMaalKu secara resmi menjadi lemabaga amil zakat asli Karawang pertama yang legal berdasarkan rekomendasi BAZNAS dan SK dari Kementerian Agama. Selanjutnya pada tahun 2020 dan 2021 BaitulMaalKu menjalankan aktivitas operasional berlandaskan 4 pilar program. </li>
              <li><i class="bx bx-check-double"></i> Tak sampai disitu , BaitulMaalKu terus berinovasi dengan menyajikan program - program yang sesuai dengan kebutuhan masyarakat dan sejalan dengan tujuan pembangunan berkelanjutan (SDG's)</li>
            </ul>
          </div>
        </div>

      </div>
    </section><!-- End About Section -->

    <!-- ======= Skills Section ======= -->
    <section id="skills" class="skills">
      <div class="container">

        <div class="row skills-content">
          <div class="col-lg-6">
            <h3>Visi</h3>
            <p>Menjadi lembaga pengelola ZISWAF yang profesional dan terkemuka di Indonesia</p>
          </div>

          <div class="col-lg-6">
            <h3>Misi</h3>
            <ol class="about-misi">
              <li>Membangun kesadaran ZISWAF terhadap masyarakat di Indonesia</li>
              <li>Menjadi Lembaga Amil Zakat yang amanah dan akuntabel.</li>
              <li>Membangun sinergi pengelolaan program santunan dan pemberdayaan umat yang sesuai dengan kebutuhan Asasi Manusia</li>
            </ol>

          </div>

        </div>

      </div>
    </section><!-- End Skills Section -->

    <!-- ======= Counts Section ======= -->
    <section id="counts" class="counts">
      <div class="container">
        <br>
        <div class="row">
    
          <div class="col-lg-4 col-6">
            <div class="count-box">
              <i class="bi bi-emoji-smile"></i>
              <span data-purecounter-start="0" data-purecounter-end="100" data-purecounter-duration="1" class="purecounter"></span>
              <p>Mitra Kami</p>
            </div>
          </div>
    
          <div class="col-lg-4 col-6">
            <div class="count-box">
              <i class="bi bi-journal-richtext"></i>
              <span data-purecounter-start="0" data-purecounter-end="8" data-purecounter-duration="1" class="purecounter"></span>
              <p>Program</p>
            </div>
          </div>
    
          <div class="col-lg-3 col-6 mt-5 mt-lg-0">
            <div class="count-box">
              <i class="bi bi-headset"></i>
              <span data-purecounter-start="0" data-purecounter-end="105303" data-purecounter-duration="1" class="purecounter"></span>
              <p>Penerima Manfaat</p>
            </div>
          </div>
    
        </div>
      </div>
    </section><!-- End Counts Section -->
    

    <!-- ======= Services Section ======= -->
 

    <!-- ======= Portfolio Section ======= -->
    <section id="portfolio" class="portfolio">
      <div class="container">
        <div class="section-title">
          <h2>Dokumentasi Kegiatan</h2>
          <p>Berikut ini adalah beberapa dokumentasi kegiatan kami</p>
        </div>
    
        <div class="row">
          <div class="col-lg-12">
            <ul id="portfolio-flters">
              <li data-filter="*" class="filter-active">Semua</li>
              <li data-filter=".filter-pintara">Pintara</li>
              <li data-filter=".filter-akademi-mnk">Akademi Berdaya PT MNK</li>
              <li data-filter=".filter-akademi-cimb">Akademi Berdaya CIMB Niaga</li>
              <li data-filter=".filter-muliakan">Muliakan Abah Emak</li>
              <li data-filter=".filter-donasi">Kemanusiaan</li>
              <li data-filter=".filter-tebar">Tebar dan Pembinaan Qur'an</li>
            </ul>            
          </div>
        </div>
        
        <div class="row portfolio-container" id="portfolio-container">
          <% 
            const categoryCounts = {};
            imageData.forEach((project, index) => {
              const category = project.category.toLowerCase();
              if (!categoryCounts[category]) {
                categoryCounts[category] = 1;
              } else {
                categoryCounts[category]++;
              }
        
              if (categoryCounts[category] <= 2) {
          %>
              <div class="col-lg-4 col-md-6 portfolio-item filter-<%= category %> wow fadeInUp">
                <div class="portfolio-wrap">
                  <figure>
                    <img src="<%= project.imageUrl %>" class="img-fluid" alt="<%= project.title %>">
                    <a href="<%= project.imageUrl %>" class="link-preview portfolio-lightbox" data-gallery="portfolioGallery" title="Preview"><i class="bx bx-plus"></i></a>
                    <a href="#" class="link-details" title="More Details"><i class="bx bx-link"></i></a>
                  </figure>
            
                  <div class="portfolio-info">
                    <h4><a href="#"><%= category %></a></h4>
                  </div>
                </div>
              </div>
          <% 
              }
            }); 
          %>
        </div>
        
        <div class="row justify-content-center">
          <div class="col-lg-12 text-center">
            <a href="/dokumentasi" class="text-center">
              <button>Lihat Semua Dokumentasi</button>
            </a>
          </div>
        </div>        
        </div>
        </section>
        
    

    <!-- ======= Contact Section ======= -->
    <section id="contact" class="contact section-bg">
      <div class="container">

        <div class="section-title">
          <h2>Kontak Kami</h2>
          <p>Jangan ragu untuk menghubungi kami. Kami ada untuk umat!</p>
        </div>

        <div class="row mt-5 justify-content-center">

          <div class="col-lg-10">

            <div class="info-wrap">
              <div class="row">
                <div class="col-lg-4 info">
                  <i class="bi bi-geo-alt"></i>
                  <h4>Location:</h4>
                  <p>Ruko Primadona, Jl. Ahmad Yani No.A2, Cikampek Sel., Kec. Cikampek, Karawang, Jawa Barat 41373</p>
                </div>

                <div class="col-lg-4 info mt-4 mt-lg-0">
                  <i class="bi bi-envelope"></i>
                  <h4>Email:</h4>
                  <p>baitulmaalku@gmail.com<br>careline@baitulmaalku.com</p>
                </div>

                <div class="col-lg-4 info mt-4 mt-lg-0">
                  <i class="bi bi-phone"></i>
                  <h4>Call:</h4>
                  <p>+62 811 1600 660 (Admin)</p>
                </div>
              </div>
            </div>

          </div>

        </div>

        <div class="row mt-5 justify-content-center">
          <div class="col-lg-10">
            <script src="https://www.google.com/recaptcha/api.js" async defer></script>
            <form action="/send-email" method="post" role="form" class="php-email-form">
              <div class="row">
                <div class="col-md-6 form-group">
                  <input type="text" name="name" class="form-control" id="name" placeholder="Your Name" required>
                </div>
                <div class="col-md-6 form-group mt-3 mt-md-0">
                  <input type="email" class="form-control" name="email" id="email" placeholder="Your Email" required>
                </div>
              </div>
              <div class="form-group mt-3">
                <input type="text" class="form-control" name="subject" id="subject" placeholder="Subject" required>
              </div>
              <div class="form-group mt-3">
                <textarea class="form-control" name="message" rows="5" placeholder="Message" required></textarea>
              </div>
              <div class="g-recaptcha" data-sitekey="6Lf17SIqAAAAAPJ5IMGORjsV4dIZE61Z70NY7tQu"></div>
              <div class="my-3">
                <div class="sent-message" id="success-message">Pesan anda telah dikirim. Terima Kasih!</div>
              </div>
              <div class="text-center"><button type="submit">Send Message</button></div>
            </form>            
          </div>
        </div>
      </div>
    </section><!-- End Contact Section -->

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
   <%- include('partials/footer') %>
  </footer><!-- End Footer -->


  <!-- modal-->


  <!-- Modal -->
  <div class="modal fade" id="zakatModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Kalkulator Zakat</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- Isi kalkulator zakat di sini -->
                <form id="zakat-form">
                    <label for="category">Jenis Zakat:</label>
                    <select id="category" name="category" class="form-control" onchange="changeZakatCategory()">
                      <option value="#" disabled selected hidden>Jenis Zakat</option>
                      <option value="income">Zakat Penghasilan</option>
                      <option value="savings">Zakat Tabungan</option>
                      <option value="trade">Zakat Perdagangan</option>
                      <option value="gold">Zakat Emas</option>
                      <option value="pertanian">Zakat Pertanian</option>
                  </select>

                    <!-- Opsi untuk Zakat Penghasilan -->
                    <div id="income-options" style="display:none;">
                      <label for="income-amount">Jumlah (IDR):</label>
                      <input type="number" id="income-amount" name="income-amount" required>                  
                        <label for="income-type">Periode Pendapatan:</label>
                        <select id="income-type" name="income-type" class="form-control">
                            <option value="monthly">Perbulan</option>
                            <option value="yearly">Pertahun</option>
                        </select>
                        <label for="note-income">Note:</label>
                        <p id="note-income">Wajib bayar: Tidak Wajib Membayar Zakat, Tapi Bisa Berinfak</p>
                    </div>

                    <!-- Opsi untuk Zakat Tabungan -->
                    <div id="savings-options" style="display:none;">
                        <label for="savings-amount">Jumlah (IDR):</label>
                        <input type="number" id="savings-amount" name="savings-amount" required>
                        <label for="interest">Bunga (Opsional):</label>
                        <input type="number" id="interest" name="interest">
                        <label for="note-savings">Note:</label>
                        <p id="note-savings">Tidak Wajib Membayar Zakat, Tapi Bisa Berinfak</p>
                    </div>

                    <!-- Opsi untuk Zakat Perdagangan -->
                   <!-- Opsi untuk Zakat Perdagangan -->
<div id="trade-options" style="display:none;">
  <label for="trade-amount">Jumlah Perdagangan (IDR):</label>
  <input type="number" id="trade-amount" name="trade-amount" required>

  <!-- Tambahkan elemen formulir lainnya sesuai kebutuhan -->
  
  <label for="note-trade">Note:</label>
  <p id="note-trade">Tidak Wajib Membayar Zakat, Tapi Bisa Berinfak</p>
</div>

<!-- Opsi untuk Zakat Pertanian -->
<!-- Opsi untuk Zakat Pertanian -->
<div id="pertanian-options" style="display:none;">
  <!-- ... (elemen input lainnya) ... -->

  <label for="hasil-pertanian">Jenis Hasil Pertanian:</label>
  <select id="hasil-pertanian" name="hasil-pertanian" class="form-control">
      <option value="padi">Hasil Pertanian Padi</option>
      <option value="lainnya">Hasil Pertanian (lainnya)</option>
      <option value="ternak">Hasil Hewan Ternak</option>
  </select>

  <label for="hasil-amount">Jumlah Hasil Pertanian (IDR):</label>
  <input type="number" id="hasil-amount" name="hasil-amount" required>

    <label for="hutang">Hutang (Opsional):</label>
    <input type="number" id="hutang" name="hutang">


  <!-- Tambahkan elemen formulir lainnya sesuai kebutuhan -->

  <label for="note-pertanian">Note:</label>
  <p id="note-pertanian">Tidak Wajib Membayar Zakat, Tapi Bisa Berinfak</p>
</div>


<!-- Opsi untuk Zakat Emas -->
<div id="gold-options" style="display:none;">
  <label for="gold-amount">Jumlah Emas (gram):</label>
  <input type="number" id="gold-amount" name="gold-amount" required>

  <!-- Tambahkan elemen formulir lainnya sesuai kebutuhan -->
  
  <label for="note-gold">Note:</label>
  <p id="note-gold">Tidak Wajib Membayar Zakat, Tapi Bisa Berinfak</p>
</div>


                    <button type="button" style="margin-top: 10px;" class="btn btn-primary" onclick="calculateZakat()">Hitung Zakat</button>
                </form>

                <div id="result"></div>
                <!-- Akhir kalkulator zakat -->
            </div>
        </div>
    </div>
</div>


<!-- Modal Rekening Zakat -->
<div class="modal fade" id="rekeningModal" tabindex="-1" role="dialog" aria-labelledby="rekeningModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="rekeningModalLabel">Rekening Zakat</h5>
              <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>Silakan transfer zakat Anda ke salah satu rekening di bawah ini:</p>
            <div>
              <img src="https://upload.wikimedia.org/wikipedia/commons/a/a0/Bank_Syariah_Indonesia.svg" alt="Bank 1 Logo" class="bank-logo">
               Zakat: 716-4164-165 a.n. Baitulmaalku
          </div>
          <div>
            <img src="https://upload.wikimedia.org/wikipedia/commons/a/a0/Bank_Syariah_Indonesia.svg" alt="Bank 1 Logo" class="bank-logo">
             Infaq: 712.897.5677 a.n. Baitulmaalku
        </div>
          <div style="margin-top: 2px;">
              <img src="https://i.pinimg.com/originals/9b/e7/bf/9be7bfcf0f85a247f60d897d7eff7240.png" alt="Bank 2 Logo" class="bank-logo">
              Wakaf: 9876-543-210 a.n. Baitulmaalku
          </div>
        </div>
      </div>
  </div>
</div>


  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- The Modal -->
  <div class="modal fade" id="donasiModal" tabindex="-1" aria-labelledby="donasiModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="donasiModalLabel">Formulir Donasi</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Nominal Sedekah -->
          <div>
            <h4>Pilih Nominal Sedekah</h4>
            <button class="btn btn-outline-primary nominal-option mb-2" data-value="50000">Rp 50.000</button>
            <button class="btn btn-outline-primary nominal-option mb-2" data-value="100000">Rp 100.000</button>
            <button class="btn btn-outline-primary nominal-option mb-2" data-value="500000">Rp 500.000</button>
            <button class="btn btn-outline-primary nominal-option mb-2" data-value="1000000">Rp 1.000.000</button>
            <button class="btn btn-outline-primary nominal-option mb-2" data-value="2000000">Rp 2.000.000</button>
          </div>

          <!-- Custom Nominal -->
          <div class="form-group mt-3">
            <label for="customNominal">Nominal Custom:</label>
            <div class="input-group">
              <span class="input-group-text">Rp</span>
              <input type="number" class="form-control" id="customNominal" placeholder="Masukkan nominal">
            </div>
          </div>

          <!-- Metode Pembayaran -->
          <div class="form-group mt-3">
            <label for="paymentMethod">Pilih Metode Pembayaran</label>
            <select class="form-control" id="paymentMethod">
              <option value="BSI">BSI</option>
              <option value="CIMB">CIMB</option>
              <option value="QRIS">QRIS</option>
            </select>
          </div>

          <!-- Data Diri -->
          <div class="form-group mt-3">
            <label for="fullName">Nama Lengkap:</label>
            <input type="text" class="form-control" id="fullName" placeholder="Nama Lengkap" required>
          </div>
          <div class="form-group">
            <label for="phoneNumber">No WhatsApp:</label>
            <input type="text" class="form-control" id="phoneNumber" placeholder="No WhatsApp" required>
          </div>
          <div class="form-group">
            <label for="email">Email:</label>
            <input type="text" class="form-control" id="email" placeholder="Your Email">
          </div>             
          <div class="form-group">
            <label for="message">Pesan dan Doa (opsional):</label>
            <textarea class="form-control" id="message" rows="3" placeholder="Tulis pesan atau doa"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
          <button type="button" id="submitDonation" class="btn btn-primary">Kirim Donasi</button>
        </div>
      </div>
    </div>
  </div>

<!-- Modal Invoice -->
<div class="modal fade" id="invoiceModal" tabindex="-1" aria-labelledby="invoiceModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      
      <!-- Modal Header -->
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="invoiceModalLabel">Invoice Donasi</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <!-- Modal Body -->
      <div class="modal-body">
        <!-- Pesan Terima Kasih -->
        <div class="text-center mb-3">
          <h5>Berikut adalah detail donasi Anda:</h5>
        </div>
        
        <!-- Detail Donasi -->
        <div class="mb-3">
          <h6>Program:</h6>
          <p id="programName" class="fw-bold"></p>
          <hr>
        </div>
        
        <div class="mb-3">
          <h6>Jumlah Donasi:</h6>
          <p id="donationAmount" class="fw-bold"></p>
        </div>
        
        <div class="mb-3">
          <h6>Kode Unik:</h6>
          <p id="uniqueCode" class="fw-bold"></p>
        </div>
        
        <div class="mb-3">
          <h6>Total Donasi (termasuk kode unik):</h6>
          <p id="totalWithCode" class="fw-bold text-success"></p>
          <hr>
        </div>

        <!-- Catatan -->
        <div class="mb-3 text-center">
          <p class="text-danger"><strong>Note:</strong> Abaikan invoice ini jika sudah membayar.</p>
        </div>
        
        <!-- Informasi Pembayaran -->
        <div class="mb-3">
          <h6 style="text-align: center;">Informasi Pembayaran:</h6>
          <div id="bankInfo" class="d-flex align-items-center">
            <!-- Ikon bank dan informasi akan muncul di sini -->
          </div>
        </div>

        <!-- Tombol Konfirmasi Donasi via WhatsApp -->
        <div class="text-center mb-3">
          <a id="whatsappButton" class="btn btn-success d-flex align-items-center justify-content-center" target="_blank">
            <i class="fab fa-whatsapp me-2"></i> Konfirmasi Donasi
          </a>
        </div>

      </div>
      
      <!-- Modal Footer -->
      <div class="modal-footer bg-light">
        <button type="button" id="closeInvoice" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
      </div>
      
    </div>
  </div>
</div>






  <!-- Vendor JS Files -->
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
  

  <script src="assets/js/kalkulator.js"></script>
  <script src="assets/js/donasi.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>
  <!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Bootstrap Bundle JS -->
<!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<!-- Bootstrap 5 Bundle JS (menyertakan Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // Refresh halaman ketika modal ditutup
document.getElementById('invoiceModal').addEventListener('hidden.bs.modal', function () {
    location.reload();
});

// Mengisi link WhatsApp dengan detail donasi
document.getElementById('whatsappButton').addEventListener('click', function() {
    const programName = document.getElementById('programName').innerText;
    const donationAmount = document.getElementById('donationAmount').innerText;
    const uniqueCode = document.getElementById('uniqueCode').innerText;
    const totalWithCode = document.getElementById('totalWithCode').innerText;

    const message = `Halo, saya ingin konfirmasi donasi untuk program ${programName} dengan jumlah ${totalWithCode} (termasuk kode unik ${uniqueCode}). Terima kasih.`;
    
    const whatsappLink = `https://wa.me/08111600660?text=${encodeURIComponent(message)}`;
    document.getElementById('whatsappButton').setAttribute('href', whatsappLink);
});

</script>

<script>

document.getElementById('submitDonation').addEventListener('click', function () {
  const name = document.getElementById('fullName').value;
  const phone = document.getElementById('phoneNumber').value;
  const message = document.getElementById('message').value;
  const paymentMethod = document.getElementById('paymentMethod').value;

  // Validate fields
  if (!name || !phone) {
    alert('Nama dan Nomor WhatsApp harus diisi.');
    return;
  }

  $('#invoiceModal').one('shown.bs.modal', function () {
    // Retrieve the total amount and campaign title from the invoice modal
    const totalWithCodeText = document.getElementById('totalWithCode').textContent.trim();
    const campaignTitle = document.getElementById('programName').textContent.trim(); // Program name from invoice

    // Clean and parse the amount
    const cleanedText = totalWithCodeText
      .replace('Rp', '')
      .replace(/\./g, '')
      .replace(',', '.')
      .trim();

    const amount = parseFloat(cleanedText);

    console.log('Parsed Amount:', amount);
    console.log('Campaign Title:', campaignTitle);

    if (isNaN(amount) || amount <= 0) {
      alert('Silakan masukkan jumlah donasi yang valid.');
      return;
    }

    // Send donation data to the server
    fetch('/donations', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        amount: amount,
        name: name,
        phone: phone,
        message: message,
        paymentMethod: paymentMethod,
        campaign_title: campaignTitle, // Ensure campaign title is included
      }),
    })
      .then((response) => response.json())
      .then((data) => {
        if (data.success) {
          console.log('Donasi berhasil.');
        } else {
          alert('Terjadi kesalahan: ' + data.message);
        }
      })
      .catch((error) => {
        console.error('Error:', error);
        alert('Terjadi kesalahan.');
      });
  });

  $('#invoiceModal').modal('show');
});

</script>
  <script>
    $(document).ready(function () {
      $('form.php-email-form').submit(function (e) {
        e.preventDefault();
        
        var formData = $(this).serialize();
        
        $.ajax({
          type: 'POST',
          url: '/send-email',
          data: formData,
          success: function (response) {
            console.log(response);
            // Tindakan setelah menerima respons dari server
            // Menampilkan pesan sukses
            $('#success-message').fadeIn().delay(3000).fadeOut();
          },
          error: function (error) {
            console.log(error);
            // Tindakan jika ada kesalahan
          },
        });
      });
    });
  </script>
   <script>
    document.getElementById('send-message-button').addEventListener('click', function() {
      var recaptcha = document.querySelector('.g-recaptcha');
      recaptcha.style.display = 'block'; // Tampilkan reCAPTCHA
      grecaptcha.execute(); // Jalankan reCAPTCHA
    });

    // Anda juga bisa menambahkan event listener untuk submit form jika diperlukan
    document.getElementById('contact-form').addEventListener('submit', function(event) {
      event.preventDefault(); // Mencegah submit form otomatis
      // Lakukan verifikasi reCAPTCHA dan submit form jika valid
      var response = grecaptcha.getResponse();
      if (response.length === 0) {
        alert('Please complete the reCAPTCHA.');
      } else {
        // Lakukan verifikasi reCAPTCHA di sisi server
        this.submit(); // Submit form setelah reCAPTCHA terverifikasi
      }
    });
  </script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
  var myModal = new bootstrap.Modal(document.getElementById('donasiModal'));
});

</script>

<script>
  document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(function (button) {
    button.addEventListener('click', function (event) {
        var modal = document.querySelector(button.getAttribute('data-bs-target'));
        var modalInstance = bootstrap.Modal.getInstance(modal);
        modalInstance.hide();
    });
});

</script>

<script>
  function generateInvoice() {
    // Logika pembuatan invoice di sini
    console.log('Invoice dibuat.');
  }

  document.getElementById('submitDonation').addEventListener('click', function() {
    const fullName = document.getElementById('fullName').value.trim();
    const phoneNumber = document.getElementById('phoneNumber').value.trim();
    const email = document.getElementById('email').value.trim();

    // Jika semua validasi lolos, buat invoice
    generateInvoice();
  });
</script>

    
  

</body>

</html>
